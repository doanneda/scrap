{"ast":null,"code":"var _jsxFileName = \"/Users/jasminewongphatarakul/scrap/scrap/scrap-app/src/CreatePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CreatePage() {\n  _s();\n  const [numImages, setNumImages] = useState(1);\n  const [images, setImages] = useState([]);\n  const [description, setDescription] = useState('');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState([]);\n  const [error, setError] = useState('');\n  const color = \"paleGreen\";\n  const stickers = [{\n    \"stickerType\": \"emoji\",\n    \"position\": [{\n      \"x\": 10,\n      \"y\": 20\n    }, {\n      \"x\": 30,\n      \"y\": 40\n    }]\n  }];\n  const navigate = useNavigate();\n  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\n  const MAX_WIDTH = 700; // decreased this from 800 \n  const MAX_HEIGHT = 700; // decreased this from 800\n\n  const handleNumImagesChange = event => {\n    const newNumImages = parseInt(event.target.value, 10);\n    setNumImages(newNumImages);\n    setImages(Array(newNumImages).fill(null));\n    setError('');\n  };\n  const handleFileChange = (index, event) => {\n    const file = event.target.files[0];\n    if (file && file.size > MAX_FILE_SIZE) {\n      alert('File is too large. Please upload a file smaller than 5MB.');\n      return;\n    }\n    const updatedImages = [...images];\n    updatedImages[index] = file;\n    setImages(updatedImages);\n    setError('');\n  };\n  const handleRemove = index => {\n    const updatedImages = [...images];\n    updatedImages[index] = null;\n    setImages(updatedImages);\n  };\n  const resizeImage = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const img = new Image();\n        img.src = reader.result;\n        img.onload = () => {\n          const canvas = document.createElement('canvas');\n          const ctx = canvas.getContext('2d');\n          let width = img.width;\n          let height = img.height;\n\n          // Resize image more aggressively if needed\n          if (width > height) {\n            if (width > MAX_WIDTH) {\n              height *= MAX_WIDTH / width;\n              width = MAX_WIDTH;\n            }\n          } else {\n            if (height > MAX_HEIGHT) {\n              width *= MAX_HEIGHT / height;\n              height = MAX_HEIGHT;\n            }\n          }\n          canvas.width = width;\n          canvas.height = height;\n          ctx.drawImage(img, 0, 0, width, height);\n\n          // can change this for better quality but smaller images size\n          resolve(canvas.toDataURL('image/jpeg', 0.25)); // 25% quality for more compression\n        };\n        img.onerror = reject;\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n  const handleUpload = async () => {\n    // Check if all required images are uploaded\n    if (images.filter(image => image !== null).length !== numImages) {\n      setError(`Please upload all ${numImages} images before proceeding.`);\n      return;\n    }\n\n    // Resize images and convert to Base64\n    const imagePromises = images.map(file => resizeImage(file));\n    try {\n      const resizedBase64Images = await Promise.all(imagePromises);\n\n      // Retrieve user token from local storage\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('You must be logged in to upload a scrapbook page.');\n        return;\n      }\n      const now = new Date();\n\n      // Send to server\n      const scrapData = {\n        binaryImages: resizedBase64Images,\n        description,\n        color,\n        stickers,\n        tags,\n        timestamp: now\n      };\n      const res = await axios.post(\n      // `${process.env.REACT_APP_SERVER_URL}/scrap-pages/post`,\n      `http://localhost:4000/scrap-pages/post`, scrapData, {\n        headers: {\n          'x-auth-token': token // Include the token in the request headers\n        }\n      });\n      console.log('Upload Successful', res.data);\n\n      // Reset state after successful upload\n      setError('');\n      setImages(Array(numImages).fill(null));\n      setDescription('');\n      alert('Upload successful!');\n    } catch (err) {\n      console.error('Upload error:', err.message);\n      setError('There was an error uploading the images.');\n    }\n\n    // route to the feed page\n    navigate('/feed');\n  };\n\n  // Handle change in the input field\n  const handleTagInputChange = e => {\n    setTagInput(e.target.value);\n  };\n\n  // Handle adding the tag\n  const handleAddTag = () => {\n    // Check if the input is not empty and is not already in the tags array\n    if (tagInput && !tags.includes(tagInput)) {\n      setTags([...tags, tagInput]); // Add the new tag to the array\n      setTagInput(''); // Clear the input field\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Select number of images:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: numImages,\n          onChange: handleNumImagesChange,\n          children: [1, 2, 3, 4].map(num => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: num,\n            children: num\n          }, num, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: `repeat(${Math.min(2, numImages)}, 1fr)`,\n        gap: '10px'\n      },\n      children: Array.from({\n        length: numImages\n      }).map((_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          textAlign: 'center'\n        },\n        children: images[index] ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: URL.createObjectURL(images[index]),\n            alt: \"Preview\",\n            style: {\n              width: '100px',\n              height: '100px',\n              objectFit: 'cover'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRemove(index),\n            style: {\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              backgroundColor: 'red',\n              color: 'white',\n              border: 'none',\n              borderRadius: '50%',\n              width: '20px',\n              height: '20px',\n              cursor: 'pointer'\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100px',\n              height: '100px',\n              border: '1px dashed gray',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              cursor: 'pointer'\n            },\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            style: {\n              display: 'none'\n            },\n            onChange: e => handleFileChange(index, e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: description,\n        onChange: e => setDescription(e.target.value),\n        placeholder: \"Enter a description here...\",\n        style: {\n          width: '100%',\n          height: '80px',\n          padding: '10px',\n          fontSize: '14px',\n          border: '1px solid gray',\n          borderRadius: '5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: tagInput,\n        onChange: handleTagInputChange,\n        placeholder: \"Enter a tag...\",\n        style: {\n          padding: '8px',\n          fontSize: '14px',\n          border: '1px solid gray',\n          borderRadius: '5px',\n          marginRight: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAddTag,\n        style: {\n          padding: '8px 16px',\n          backgroundColor: '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer'\n        },\n        children: \"Add Tag\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Tags:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              display: 'inline-block',\n              marginRight: '10px',\n              padding: '5px',\n              backgroundColor: '#f0f0f0',\n              borderRadius: '5px'\n            },\n            children: tag\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '10px',\n        color: 'red',\n        fontSize: '14px'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      style: {\n        marginTop: '20px',\n        padding: '10px 20px',\n        backgroundColor: 'blue',\n        color: 'white',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer'\n      },\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n}\n_s(CreatePage, \"v3h2FPEu6PQXAuno6wdXtuT+04A=\", false, function () {\n  return [useNavigate];\n});\n_c = CreatePage;\nvar _c;\n$RefreshReg$(_c, \"CreatePage\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","CreatePage","_s","numImages","setNumImages","images","setImages","description","setDescription","tagInput","setTagInput","tags","setTags","error","setError","color","stickers","navigate","MAX_FILE_SIZE","MAX_WIDTH","MAX_HEIGHT","handleNumImagesChange","event","newNumImages","parseInt","target","value","Array","fill","handleFileChange","index","file","files","size","alert","updatedImages","handleRemove","resizeImage","Promise","resolve","reject","reader","FileReader","onloadend","img","Image","src","result","onload","canvas","document","createElement","ctx","getContext","width","height","drawImage","toDataURL","onerror","readAsDataURL","handleUpload","filter","image","length","imagePromises","map","resizedBase64Images","all","token","localStorage","getItem","now","Date","scrapData","binaryImages","timestamp","res","post","headers","console","log","data","err","message","handleTagInputChange","e","handleAddTag","includes","children","onChange","num","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gridTemplateColumns","Math","min","gap","from","_","position","textAlign","URL","createObjectURL","alt","objectFit","onClick","top","right","backgroundColor","border","borderRadius","cursor","alignItems","justifyContent","type","marginTop","placeholder","padding","fontSize","marginRight","tag","_c","$RefreshReg$"],"sources":["/Users/jasminewongphatarakul/scrap/scrap/scrap-app/src/CreatePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function CreatePage() {\n  const [numImages, setNumImages] = useState(1);\n  const [images, setImages] = useState([]);\n  const [description, setDescription] = useState('');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState([]);\n  const [error, setError] = useState('');\n  const color = \"paleGreen\";\n  const stickers = [\n    {\n      \"stickerType\": \"emoji\",\n      \"position\": [\n        { \"x\": 10, \"y\": 20 },\n        { \"x\": 30, \"y\": 40 }\n      ]\n    },\n  ];\n  const navigate = useNavigate();\n\n  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\n  const MAX_WIDTH = 700; // decreased this from 800 \n  const MAX_HEIGHT = 700; // decreased this from 800\n\n  const handleNumImagesChange = (event) => {\n    const newNumImages = parseInt(event.target.value, 10);\n    setNumImages(newNumImages);\n    setImages(Array(newNumImages).fill(null));\n    setError('');\n  };\n\n  const handleFileChange = (index, event) => {\n    const file = event.target.files[0];\n    if (file && file.size > MAX_FILE_SIZE) {\n      alert('File is too large. Please upload a file smaller than 5MB.');\n      return;\n    }\n\n    const updatedImages = [...images];\n    updatedImages[index] = file;\n    setImages(updatedImages);\n    setError('');\n  };\n\n  const handleRemove = (index) => {\n    const updatedImages = [...images];\n    updatedImages[index] = null;\n    setImages(updatedImages);\n  };\n  const resizeImage = (file) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const img = new Image();\n        img.src = reader.result;\n  \n        img.onload = () => {\n          const canvas = document.createElement('canvas');\n          const ctx = canvas.getContext('2d');\n  \n          let width = img.width;\n          let height = img.height;\n  \n          // Resize image more aggressively if needed\n          if (width > height) {\n            if (width > MAX_WIDTH) {\n              height *= MAX_WIDTH / width;\n              width = MAX_WIDTH;\n            }\n          } else {\n            if (height > MAX_HEIGHT) {\n              width *= MAX_HEIGHT / height;\n              height = MAX_HEIGHT;\n            }\n          }\n  \n          canvas.width = width;\n          canvas.height = height;\n          ctx.drawImage(img, 0, 0, width, height);\n\n          // can change this for better quality but smaller images size\n          resolve(canvas.toDataURL('image/jpeg', 0.25)); // 25% quality for more compression\n        };\n  \n        img.onerror = reject;\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n  \n\n  const handleUpload = async () => {\n    // Check if all required images are uploaded\n    if (images.filter((image) => image !== null).length !== numImages) {\n      setError(`Please upload all ${numImages} images before proceeding.`);\n      return;\n    }\n  \n    // Resize images and convert to Base64\n    const imagePromises = images.map((file) => resizeImage(file));\n  \n    try {\n      const resizedBase64Images = await Promise.all(imagePromises);\n  \n      // Retrieve user token from local storage\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('You must be logged in to upload a scrapbook page.');\n        return;\n      }\n\n      const now = new Date();\n\n      // Send to server\n      const scrapData = {\n        binaryImages: resizedBase64Images,\n        description,\n        color,\n        stickers,\n        tags,\n        timestamp: now,\n      };\n  \n      const res = await axios.post(\n        // `${process.env.REACT_APP_SERVER_URL}/scrap-pages/post`,\n        `http://localhost:4000/scrap-pages/post`,\n        scrapData,\n        {\n          headers: {\n            'x-auth-token': token, // Include the token in the request headers\n          },\n        }\n      );\n  \n      console.log('Upload Successful', res.data);\n  \n      // Reset state after successful upload\n      setError('');\n      setImages(Array(numImages).fill(null));\n      setDescription('');\n      alert('Upload successful!');\n    } catch (err) {\n      console.error('Upload error:', err.message);\n      setError('There was an error uploading the images.');\n    }\n\n    // route to the feed page\n    navigate('/feed');\n  };\n\n  // Handle change in the input field\n  const handleTagInputChange = (e) => {\n    setTagInput(e.target.value);\n  };\n\n  // Handle adding the tag\n  const handleAddTag = () => {\n    // Check if the input is not empty and is not already in the tags array\n    if (tagInput && !tags.includes(tagInput)) {\n      setTags([...tags, tagInput]); // Add the new tag to the array\n      setTagInput(''); // Clear the input field\n    }\n  };\n  \n\n  return (\n    <div>\n      {/* Dropdown for Number of Images */}\n      <div>\n        <label>\n          Select number of images:\n          <select value={numImages} onChange={handleNumImagesChange}>\n            {[1, 2, 3, 4].map((num) => (\n              <option key={num} value={num}>\n                {num}\n              </option>\n            ))}\n          </select>\n        </label>\n      </div>\n\n      {/* Dynamic Grid for Image Slots */}\n      <div\n        style={{\n          display: 'grid',\n          gridTemplateColumns: `repeat(${Math.min(2, numImages)}, 1fr)`,\n          gap: '10px',\n        }}\n      >\n        {Array.from({ length: numImages }).map((_, index) => (\n          <div key={index} style={{ position: 'relative', textAlign: 'center' }}>\n            {images[index] ? (\n              <>\n                <img\n                  src={URL.createObjectURL(images[index])}\n                  alt=\"Preview\"\n                  style={{\n                    width: '100px',\n                    height: '100px',\n                    objectFit: 'cover',\n                  }}\n                />\n                <button\n                  onClick={() => handleRemove(index)}\n                  style={{\n                    position: 'absolute',\n                    top: 0,\n                    right: 0,\n                    backgroundColor: 'red',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '50%',\n                    width: '20px',\n                    height: '20px',\n                    cursor: 'pointer',\n                  }}\n                >\n                  &times;\n                </button>\n              </>\n            ) : (\n              <label>\n                <div\n                  style={{\n                    width: '100px',\n                    height: '100px',\n                    border: '1px dashed gray',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    cursor: 'pointer',\n                  }}\n                >\n                  +\n                </div>\n                <input\n                  type=\"file\"\n                  style={{ display: 'none' }}\n                  onChange={(e) => handleFileChange(index, e)}\n                />\n              </label>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Text Input Section For Description */}\n      <div style={{ marginTop: '20px' }}>\n        <textarea\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Enter a description here...\"\n          style={{\n            width: '100%',\n            height: '80px',\n            padding: '10px',\n            fontSize: '14px',\n            border: '1px solid gray',\n            borderRadius: '5px',\n          }}\n        ></textarea>\n      </div>\n\n      <div style={{ marginTop: '20px' }}>\n      {/* Text input for entering a tag */}\n      <input\n        type=\"text\"\n        value={tagInput}\n        onChange={handleTagInputChange}\n        placeholder=\"Enter a tag...\"\n        style={{\n          padding: '8px',\n          fontSize: '14px',\n          border: '1px solid gray',\n          borderRadius: '5px',\n          marginRight: '10px',\n        }}\n      />\n\n      {/* Button to add the tag */}\n      <button\n        onClick={handleAddTag}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer',\n        }}\n      >\n        Add Tag\n      </button>\n\n      {/* Display the current tags */}\n      <div style={{ marginTop: '10px' }}>\n        <h4>Tags:</h4>\n        <ul>\n          {tags.map((tag, index) => (\n            <li key={index} style={{ display: 'inline-block', marginRight: '10px', padding: '5px', backgroundColor: '#f0f0f0', borderRadius: '5px' }}>\n              {tag}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n\n      {/* Error Message */}\n      {error && (\n        <div\n          style={{\n            marginTop: '10px',\n            color: 'red',\n            fontSize: '14px',\n          }}\n        >\n          {error}\n        </div>\n      )}\n\n      {/* Upload Button */}\n      <button\n        onClick={handleUpload}\n        style={{\n          marginTop: '20px',\n          padding: '10px 20px',\n          backgroundColor: 'blue',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer',\n        }}\n      >\n        Upload\n      </button>\n    </div>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/C,eAAe,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACnC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkB,IAAI,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACoB,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMsB,KAAK,GAAG,WAAW;EACzB,MAAMC,QAAQ,GAAG,CACf;IACE,aAAa,EAAE,OAAO;IACtB,UAAU,EAAE,CACV;MAAE,GAAG,EAAE,EAAE;MAAE,GAAG,EAAE;IAAG,CAAC,EACpB;MAAE,GAAG,EAAE,EAAE;MAAE,GAAG,EAAE;IAAG,CAAC;EAExB,CAAC,CACF;EACD,MAAMC,QAAQ,GAAGrB,WAAW,CAAC,CAAC;EAE9B,MAAMsB,aAAa,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;EACvC,MAAMC,SAAS,GAAG,GAAG,CAAC,CAAC;EACvB,MAAMC,UAAU,GAAG,GAAG,CAAC,CAAC;;EAExB,MAAMC,qBAAqB,GAAIC,KAAK,IAAK;IACvC,MAAMC,YAAY,GAAGC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAACC,KAAK,EAAE,EAAE,CAAC;IACrDtB,YAAY,CAACmB,YAAY,CAAC;IAC1BjB,SAAS,CAACqB,KAAK,CAACJ,YAAY,CAAC,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC;IACzCd,QAAQ,CAAC,EAAE,CAAC;EACd,CAAC;EAED,MAAMe,gBAAgB,GAAGA,CAACC,KAAK,EAAER,KAAK,KAAK;IACzC,MAAMS,IAAI,GAAGT,KAAK,CAACG,MAAM,CAACO,KAAK,CAAC,CAAC,CAAC;IAClC,IAAID,IAAI,IAAIA,IAAI,CAACE,IAAI,GAAGf,aAAa,EAAE;MACrCgB,KAAK,CAAC,2DAA2D,CAAC;MAClE;IACF;IAEA,MAAMC,aAAa,GAAG,CAAC,GAAG9B,MAAM,CAAC;IACjC8B,aAAa,CAACL,KAAK,CAAC,GAAGC,IAAI;IAC3BzB,SAAS,CAAC6B,aAAa,CAAC;IACxBrB,QAAQ,CAAC,EAAE,CAAC;EACd,CAAC;EAED,MAAMsB,YAAY,GAAIN,KAAK,IAAK;IAC9B,MAAMK,aAAa,GAAG,CAAC,GAAG9B,MAAM,CAAC;IACjC8B,aAAa,CAACL,KAAK,CAAC,GAAG,IAAI;IAC3BxB,SAAS,CAAC6B,aAAa,CAAC;EAC1B,CAAC;EACD,MAAME,WAAW,GAAIN,IAAI,IAAK;IAC5B,OAAO,IAAIO,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,SAAS,GAAG,MAAM;QACvB,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;QACvBD,GAAG,CAACE,GAAG,GAAGL,MAAM,CAACM,MAAM;QAEvBH,GAAG,CAACI,MAAM,GAAG,MAAM;UACjB,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;UAC/C,MAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;UAEnC,IAAIC,KAAK,GAAGV,GAAG,CAACU,KAAK;UACrB,IAAIC,MAAM,GAAGX,GAAG,CAACW,MAAM;;UAEvB;UACA,IAAID,KAAK,GAAGC,MAAM,EAAE;YAClB,IAAID,KAAK,GAAGnC,SAAS,EAAE;cACrBoC,MAAM,IAAIpC,SAAS,GAAGmC,KAAK;cAC3BA,KAAK,GAAGnC,SAAS;YACnB;UACF,CAAC,MAAM;YACL,IAAIoC,MAAM,GAAGnC,UAAU,EAAE;cACvBkC,KAAK,IAAIlC,UAAU,GAAGmC,MAAM;cAC5BA,MAAM,GAAGnC,UAAU;YACrB;UACF;UAEA6B,MAAM,CAACK,KAAK,GAAGA,KAAK;UACpBL,MAAM,CAACM,MAAM,GAAGA,MAAM;UACtBH,GAAG,CAACI,SAAS,CAACZ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAEU,KAAK,EAAEC,MAAM,CAAC;;UAEvC;UACAhB,OAAO,CAACU,MAAM,CAACQ,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QACjD,CAAC;QAEDb,GAAG,CAACc,OAAO,GAAGlB,MAAM;MACtB,CAAC;MACDC,MAAM,CAACiB,OAAO,GAAGlB,MAAM;MACvBC,MAAM,CAACkB,aAAa,CAAC5B,IAAI,CAAC;IAC5B,CAAC,CAAC;EACJ,CAAC;EAGD,MAAM6B,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B;IACA,IAAIvD,MAAM,CAACwD,MAAM,CAAEC,KAAK,IAAKA,KAAK,KAAK,IAAI,CAAC,CAACC,MAAM,KAAK5D,SAAS,EAAE;MACjEW,QAAQ,CAAC,qBAAqBX,SAAS,4BAA4B,CAAC;MACpE;IACF;;IAEA;IACA,MAAM6D,aAAa,GAAG3D,MAAM,CAAC4D,GAAG,CAAElC,IAAI,IAAKM,WAAW,CAACN,IAAI,CAAC,CAAC;IAE7D,IAAI;MACF,MAAMmC,mBAAmB,GAAG,MAAM5B,OAAO,CAAC6B,GAAG,CAACH,aAAa,CAAC;;MAE5D;MACA,MAAMI,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACVtD,QAAQ,CAAC,mDAAmD,CAAC;QAC7D;MACF;MAEA,MAAMyD,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;;MAEtB;MACA,MAAMC,SAAS,GAAG;QAChBC,YAAY,EAAER,mBAAmB;QACjC3D,WAAW;QACXQ,KAAK;QACLC,QAAQ;QACRL,IAAI;QACJgE,SAAS,EAAEJ;MACb,CAAC;MAED,MAAMK,GAAG,GAAG,MAAMjF,KAAK,CAACkF,IAAI;MAC1B;MACA,wCAAwC,EACxCJ,SAAS,EACT;QACEK,OAAO,EAAE;UACP,cAAc,EAAEV,KAAK,CAAE;QACzB;MACF,CACF,CAAC;MAEDW,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEJ,GAAG,CAACK,IAAI,CAAC;;MAE1C;MACAnE,QAAQ,CAAC,EAAE,CAAC;MACZR,SAAS,CAACqB,KAAK,CAACxB,SAAS,CAAC,CAACyB,IAAI,CAAC,IAAI,CAAC,CAAC;MACtCpB,cAAc,CAAC,EAAE,CAAC;MAClB0B,KAAK,CAAC,oBAAoB,CAAC;IAC7B,CAAC,CAAC,OAAOgD,GAAG,EAAE;MACZH,OAAO,CAAClE,KAAK,CAAC,eAAe,EAAEqE,GAAG,CAACC,OAAO,CAAC;MAC3CrE,QAAQ,CAAC,0CAA0C,CAAC;IACtD;;IAEA;IACAG,QAAQ,CAAC,OAAO,CAAC;EACnB,CAAC;;EAED;EACA,MAAMmE,oBAAoB,GAAIC,CAAC,IAAK;IAClC3E,WAAW,CAAC2E,CAAC,CAAC5D,MAAM,CAACC,KAAK,CAAC;EAC7B,CAAC;;EAED;EACA,MAAM4D,YAAY,GAAGA,CAAA,KAAM;IACzB;IACA,IAAI7E,QAAQ,IAAI,CAACE,IAAI,CAAC4E,QAAQ,CAAC9E,QAAQ,CAAC,EAAE;MACxCG,OAAO,CAAC,CAAC,GAAGD,IAAI,EAAEF,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC9BC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;IACnB;EACF,CAAC;EAGD,oBACEZ,OAAA;IAAA0F,QAAA,gBAEE1F,OAAA;MAAA0F,QAAA,eACE1F,OAAA;QAAA0F,QAAA,GAAO,0BAEL,eAAA1F,OAAA;UAAQ4B,KAAK,EAAEvB,SAAU;UAACsF,QAAQ,EAAEpE,qBAAsB;UAAAmE,QAAA,EACvD,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACvB,GAAG,CAAEyB,GAAG,iBACpB5F,OAAA;YAAkB4B,KAAK,EAAEgE,GAAI;YAAAF,QAAA,EAC1BE;UAAG,GADOA,GAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAER,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGNhG,OAAA;MACEiG,KAAK,EAAE;QACLC,OAAO,EAAE,MAAM;QACfC,mBAAmB,EAAE,UAAUC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEhG,SAAS,CAAC,QAAQ;QAC7DiG,GAAG,EAAE;MACP,CAAE;MAAAZ,QAAA,EAED7D,KAAK,CAAC0E,IAAI,CAAC;QAAEtC,MAAM,EAAE5D;MAAU,CAAC,CAAC,CAAC8D,GAAG,CAAC,CAACqC,CAAC,EAAExE,KAAK,kBAC9ChC,OAAA;QAAiBiG,KAAK,EAAE;UAAEQ,QAAQ,EAAE,UAAU;UAAEC,SAAS,EAAE;QAAS,CAAE;QAAAhB,QAAA,EACnEnF,MAAM,CAACyB,KAAK,CAAC,gBACZhC,OAAA,CAAAE,SAAA;UAAAwF,QAAA,gBACE1F,OAAA;YACEgD,GAAG,EAAE2D,GAAG,CAACC,eAAe,CAACrG,MAAM,CAACyB,KAAK,CAAC,CAAE;YACxC6E,GAAG,EAAC,SAAS;YACbZ,KAAK,EAAE;cACLzC,KAAK,EAAE,OAAO;cACdC,MAAM,EAAE,OAAO;cACfqD,SAAS,EAAE;YACb;UAAE;YAAAjB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACFhG,OAAA;YACE+G,OAAO,EAAEA,CAAA,KAAMzE,YAAY,CAACN,KAAK,CAAE;YACnCiE,KAAK,EAAE;cACLQ,QAAQ,EAAE,UAAU;cACpBO,GAAG,EAAE,CAAC;cACNC,KAAK,EAAE,CAAC;cACRC,eAAe,EAAE,KAAK;cACtBjG,KAAK,EAAE,OAAO;cACdkG,MAAM,EAAE,MAAM;cACdC,YAAY,EAAE,KAAK;cACnB5D,KAAK,EAAE,MAAM;cACbC,MAAM,EAAE,MAAM;cACd4D,MAAM,EAAE;YACV,CAAE;YAAA3B,QAAA,EACH;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,eACT,CAAC,gBAEHhG,OAAA;UAAA0F,QAAA,gBACE1F,OAAA;YACEiG,KAAK,EAAE;cACLzC,KAAK,EAAE,OAAO;cACdC,MAAM,EAAE,OAAO;cACf0D,MAAM,EAAE,iBAAiB;cACzBjB,OAAO,EAAE,MAAM;cACfoB,UAAU,EAAE,QAAQ;cACpBC,cAAc,EAAE,QAAQ;cACxBF,MAAM,EAAE;YACV,CAAE;YAAA3B,QAAA,EACH;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACNhG,OAAA;YACEwH,IAAI,EAAC,MAAM;YACXvB,KAAK,EAAE;cAAEC,OAAO,EAAE;YAAO,CAAE;YAC3BP,QAAQ,EAAGJ,CAAC,IAAKxD,gBAAgB,CAACC,KAAK,EAAEuD,CAAC;UAAE;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG;MACR,GAnDOhE,KAAK;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAoDV,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAGNhG,OAAA;MAAKiG,KAAK,EAAE;QAAEwB,SAAS,EAAE;MAAO,CAAE;MAAA/B,QAAA,eAChC1F,OAAA;QACE4B,KAAK,EAAEnB,WAAY;QACnBkF,QAAQ,EAAGJ,CAAC,IAAK7E,cAAc,CAAC6E,CAAC,CAAC5D,MAAM,CAACC,KAAK,CAAE;QAChD8F,WAAW,EAAC,6BAA6B;QACzCzB,KAAK,EAAE;UACLzC,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,MAAM;UACdkE,OAAO,EAAE,MAAM;UACfC,QAAQ,EAAE,MAAM;UAChBT,MAAM,EAAE,gBAAgB;UACxBC,YAAY,EAAE;QAChB;MAAE;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACO;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACT,CAAC,eAENhG,OAAA;MAAKiG,KAAK,EAAE;QAAEwB,SAAS,EAAE;MAAO,CAAE;MAAA/B,QAAA,gBAElC1F,OAAA;QACEwH,IAAI,EAAC,MAAM;QACX5F,KAAK,EAAEjB,QAAS;QAChBgF,QAAQ,EAAEL,oBAAqB;QAC/BoC,WAAW,EAAC,gBAAgB;QAC5BzB,KAAK,EAAE;UACL0B,OAAO,EAAE,KAAK;UACdC,QAAQ,EAAE,MAAM;UAChBT,MAAM,EAAE,gBAAgB;UACxBC,YAAY,EAAE,KAAK;UACnBS,WAAW,EAAE;QACf;MAAE;QAAAhC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGFhG,OAAA;QACE+G,OAAO,EAAEvB,YAAa;QACtBS,KAAK,EAAE;UACL0B,OAAO,EAAE,UAAU;UACnBT,eAAe,EAAE,SAAS;UAC1BjG,KAAK,EAAE,OAAO;UACdkG,MAAM,EAAE,MAAM;UACdC,YAAY,EAAE,KAAK;UACnBC,MAAM,EAAE;QACV,CAAE;QAAA3B,QAAA,EACH;MAED;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAGThG,OAAA;QAAKiG,KAAK,EAAE;UAAEwB,SAAS,EAAE;QAAO,CAAE;QAAA/B,QAAA,gBAChC1F,OAAA;UAAA0F,QAAA,EAAI;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACdhG,OAAA;UAAA0F,QAAA,EACG7E,IAAI,CAACsD,GAAG,CAAC,CAAC2D,GAAG,EAAE9F,KAAK,kBACnBhC,OAAA;YAAgBiG,KAAK,EAAE;cAAEC,OAAO,EAAE,cAAc;cAAE2B,WAAW,EAAE,MAAM;cAAEF,OAAO,EAAE,KAAK;cAAET,eAAe,EAAE,SAAS;cAAEE,YAAY,EAAE;YAAM,CAAE;YAAA1B,QAAA,EACtIoC;UAAG,GADG9F,KAAK;YAAA6D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEV,CACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGHjF,KAAK,iBACJf,OAAA;MACEiG,KAAK,EAAE;QACLwB,SAAS,EAAE,MAAM;QACjBxG,KAAK,EAAE,KAAK;QACZ2G,QAAQ,EAAE;MACZ,CAAE;MAAAlC,QAAA,EAED3E;IAAK;MAAA8E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAGDhG,OAAA;MACE+G,OAAO,EAAEjD,YAAa;MACtBmC,KAAK,EAAE;QACLwB,SAAS,EAAE,MAAM;QACjBE,OAAO,EAAE,WAAW;QACpBT,eAAe,EAAE,MAAM;QACvBjG,KAAK,EAAE,OAAO;QACdkG,MAAM,EAAE,MAAM;QACdC,YAAY,EAAE,KAAK;QACnBC,MAAM,EAAE;MACV,CAAE;MAAA3B,QAAA,EACH;IAED;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAAC5F,EAAA,CAjVuBD,UAAU;EAAA,QAiBfL,WAAW;AAAA;AAAAiI,EAAA,GAjBN5H,UAAU;AAAA,IAAA4H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}